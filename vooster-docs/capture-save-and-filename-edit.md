# 촬영 파일 저장 및 파일명 일괄 수정 설계

## 1. 흐름 개요

```
[촬영 확인 페이지]
  → 생성된 파일명 목록 표시 (editedFilenames)
  → 사용자: 일괄 수정 (찾기/바꾸기, 전체 또는 선택 항목)
  → 사용자: "ZIP 다운로드"
    → 브라우저에서 ZIP 생성 후 다운로드 (editedFilenames 사용)
```

※ 서버 저장(업로드) 기능은 제거됨. ZIP 다운로드만 사용.

## 2. 파일명 편집

- **편집 대상**: `editedFilenames: string[]` (초기값 = 자동 생성된 파일명)
- **일괄 수정**:
  - **찾을 문자열** / **바꿀 문자열** 입력
  - **적용 대상**: "전체" | "선택한 항목"
  - 선택: 각 파일명 행에 체크박스로 "선택한 항목" 지정
  - 적용 시: 대상 파일명에 대해 `문자열.replace(찾을문자열, 바꿀문자열)` 반영 (전역 치환)
- **개별 수정**: 각 행을 input으로 두어 파일명을 직접 수정 가능 (선택 사항)

## 3. 다운로드 (ZIP)

- 클라이언트: JSZip 사용
  - 세션의 `adImages[]`를 Blob으로 변환
  - 각 Blob을 `editedFilenames[i].jpg` 이름으로 ZIP에 추가
  - ZIP 파일 다운로드 (예: `촬영_YYYYMMdd_HHmm.zip`)
- 서버 불필요

## 4. 코드 위치

| 기능 | 위치 |
|------|------|
| 파일명 자동 생성 | `src/features/capture/lib/capture-filename.ts` |
| 편집/일괄 수정 상태 | `src/app/(protected)/capture/confirm/page.tsx` |
| ZIP 다운로드 | confirm 페이지 내 (handleDownloadZip) |

## 5. 파일명 형식

- **최종 형식**: `{광고주}_{호선}_{역명}_{사용자직접기입명}_{YYYYMMdd}_{01~99}.jpg`
- **사용자직접기입명**: 확인 페이지에서 일괄 입력 가능 (예: DL16). 비어 있으면 역명 다음이 날짜.

## 6. 일괄 수정 예시

- **예**: "5호선" → "8호선"
  - 적용 대상: 전체 선택 후 "선택한 항목에 적용" 또는 "전체 적용"
  - 결과: `에스에스지닷컴_5호선_공덕_DL16_20260203_01.jpg` → `에스에스지닷컴_8호선_공덕_DL16_20260203_01.jpg`
